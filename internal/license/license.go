//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package license ;import (_ae "bytes";_f "compress/gzip";_e "crypto";_ab "crypto/aes";_bg "crypto/cipher";_ad "crypto/rand";_fc "crypto/rsa";_c "crypto/sha256";_ec "crypto/sha512";_cg "crypto/x509";_fd "encoding/base64";_fef "encoding/binary";_bc "encoding/hex";_age "encoding/json";_fge "encoding/pem";_bd "errors";_ef "fmt";_ge "github.com/unidoc/unioffice";_aeg "github.com/unidoc/unioffice/common";_af "io";_gc "io/ioutil";_fg "log";_b "net";_eb "net/http";_gg "os";_agf "path/filepath";_g "regexp";_fe "sort";_bbc "strings";_ag "sync";_bb "time";);const _fgc ="\u0033\u0030\u0035\u0063\u0033\u0030\u0030\u00640\u0036\u0030\u0039\u0032\u0061\u0038\u00364\u0038\u0038\u0036\u0066\u0037\u0030d\u0030\u0031\u0030\u0031\u0030\u00310\u0035\u0030\u0030\u0030\u0033\u0034\u0062\u0030\u0030\u0033\u0030\u00348\u0030\u0032\u0034\u0031\u0030\u0030\u0062\u0038\u0037\u0065\u0061\u0066\u0062\u0036\u0063\u0030\u0037\u0034\u0039\u0039\u0065\u0062\u00397\u0063\u0063\u0039\u0064\u0033\u0035\u0036\u0035\u0065\u0063\u00663\u0031\u0036\u0038\u0031\u0039\u0036\u0033\u0030\u0031\u0039\u0030\u0037c\u0038\u0034\u0031\u0061\u0064\u0064c6\u0036\u0035\u0030\u0038\u0036\u0062\u0062\u0033\u0065\u0064\u0038\u0065\u0062\u0031\u0032\u0064\u0039\u0064\u0061\u0032\u0036\u0063\u0061\u0066\u0061\u0039\u0036\u00345\u0030\u00314\u0036\u0064\u0061\u0038\u0062\u0064\u0030\u0063c\u0066\u0031\u0035\u0035\u0066\u0063a\u0063\u0063\u00368\u0036\u0039\u0035\u0035\u0065\u0066\u0030\u0033\u0030\u0032\u0066\u0061\u0034\u0034\u0061\u0061\u0033\u0065\u0063\u0038\u0039\u0034\u0031\u0037\u0062\u0030\u0032\u0030\u0033\u0030\u0031\u0030\u0030\u0030\u0031";func (_bdg *meteredClient )getStatus ()(meteredStatusResp ,error ){var _eeeg meteredStatusResp ;_cee :=_bdg ._cf +"\u002fm\u0065t\u0065\u0072\u0065\u0064\u002f\u0073\u0074\u0061\u0074\u0075\u0073";var _fec meteredStatusForm ;_feb ,_dcf :=_age .Marshal (_fec );if _dcf !=nil {return _eeeg ,_dcf ;};_ed ,_dcf :=_gdd (_feb );if _dcf !=nil {return _eeeg ,_dcf ;};_dg ,_dcf :=_eb .NewRequest ("\u0050\u004f\u0053\u0054",_cee ,_ed );if _dcf !=nil {return _eeeg ,_dcf ;};_dg .Header .Add ("\u0043\u006f\u006et\u0065\u006e\u0074\u002d\u0054\u0079\u0070\u0065","\u0061\u0070p\u006c\u0069\u0063a\u0074\u0069\u006f\u006e\u002f\u006a\u0073\u006f\u006e");_dg .Header .Add ("\u0043\u006fn\u0074\u0065\u006et\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067","\u0067\u007a\u0069\u0070");_dg .Header .Add ("\u0041c\u0063e\u0070\u0074\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067","\u0067\u007a\u0069\u0070");_dg .Header .Add ("\u0058-\u0041\u0050\u0049\u002d\u004b\u0045Y",_bdg ._cbd );_dbb ,_dcf :=_bdg ._dd .Do (_dg );if _dcf !=nil {return _eeeg ,_dcf ;};defer _dbb .Body .Close ();if _dbb .StatusCode !=200{return _eeeg ,_ef .Errorf ("\u0066\u0061i\u006c\u0065\u0064\u0020t\u006f\u0020c\u0068\u0065\u0063\u006b\u0069\u006e\u002c\u0020s\u0074\u0061\u0074\u0075\u0073\u0020\u0063\u006f\u0064\u0065\u0020\u0069s\u003a\u0020\u0025\u0064",_dbb .StatusCode );};_gfb ,_dcf :=_aae (_dbb );if _dcf !=nil {return _eeeg ,_dcf ;};_dcf =_age .Unmarshal (_gfb ,&_eeeg );if _dcf !=nil {return _eeeg ,_dcf ;};return _eeeg ,nil ;};const _egfg ="\u0055\u004e\u0049\u004fFF\u0049\u0043\u0045\u005f\u004c\u0049\u0043\u0045\u004e\u0053\u0045\u005f\u0050\u0041T\u0048";func TrackUse (useKey string ){if _dce ==nil {return ;};if !_dce ._bgd ||len (_dce ._bcf )==0{return ;};if len (useKey )==0{return ;};_debc .Lock ();defer _debc .Unlock ();if _gdg ==nil {_gdg =map[string ]int {};};_gdg [useKey ]++;};type meteredStatusForm struct{};type LegacyLicenseType byte ;func (_aca LegacyLicense )Verify (pubKey *_fc .PublicKey )error {_gbe :=_aca ;_gbe .Signature ="";_adcd :=_ae .Buffer {};_cda :=_age .NewEncoder (&_adcd );if _cbe :=_cda .Encode (_gbe );_cbe !=nil {return _cbe ;};_fb ,_gga :=_bc .DecodeString (_aca .Signature );if _gga !=nil {return _gga ;};_gbb :=_c .Sum256 (_adcd .Bytes ());_gga =_fc .VerifyPKCS1v15 (pubKey ,_e .SHA256 ,_gbb [:],_fb );return _gga ;};func _dca ()(_b .IP ,error ){_bdc ,_cea :=_b .Dial ("\u0075\u0064\u0070","\u0038\u002e\u0038\u002e\u0038\u002e\u0038\u003a\u0038\u0030");if _cea !=nil {return nil ,_cea ;};defer _bdc .Close ();_bef :=_bdc .LocalAddr ().(*_b .UDPAddr );return _bef .IP ,nil ;};func GetMeteredState ()(MeteredStatus ,error ){if _dce ==nil {return MeteredStatus {},_bd .New ("\u006c\u0069\u0063\u0065ns\u0065\u0020\u006b\u0065\u0079\u0020\u006e\u006f\u0074\u0020\u0073\u0065\u0074");};if !_dce ._bgd ||len (_dce ._bcf )==0{return MeteredStatus {},_bd .New ("\u0061p\u0069 \u006b\u0065\u0079\u0020\u006e\u006f\u0074\u0020\u0073\u0065\u0074");};_baa ,_fce :=_cdd .loadState (_dce ._bcf );if _fce !=nil {_ge .Log ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0076\u000a",_fce );return MeteredStatus {},_fce ;};if _baa .Docs > 0{_cbc :=_eca ("","",true );if _cbc !=nil {return MeteredStatus {},_cbc ;};};_debc .Lock ();defer _debc .Unlock ();_fefe :=_gff ();_fefe ._cbd =_dce ._bcf ;_fcf ,_fce :=_fefe .getStatus ();if _fce !=nil {return MeteredStatus {},_fce ;};if !_fcf .Valid {return MeteredStatus {},_bd .New ("\u006b\u0065\u0079\u0020\u006e\u006f\u0074\u0020\u0076\u0061\u006c\u0069\u0064");};_df :=MeteredStatus {OK :true ,Credits :_fcf .OrgCredits ,Used :_fcf .OrgUsed };return _df ,nil ;};var _bdag =_bb .Date (2010,1,1,0,0,0,0,_bb .UTC );type meteredClient struct{_cf string ;_cbd string ;_dd *_eb .Client ;};func (_eee *LicenseKey )ToString ()string {if _eee ._bgd {return "M\u0065t\u0065\u0072\u0065\u0064\u0020\u0073\u0075\u0062s\u0063\u0072\u0069\u0070ti\u006f\u006e";};_bcd :=_ef .Sprintf ("\u004ci\u0063e\u006e\u0073\u0065\u0020\u0049\u0064\u003a\u0020\u0025\u0073\u000a",_eee .LicenseId );_bcd +=_ef .Sprintf ("\u0043\u0075s\u0074\u006f\u006de\u0072\u0020\u0049\u0064\u003a\u0020\u0025\u0073\u000a",_eee .CustomerId );_bcd +=_ef .Sprintf ("\u0043u\u0073t\u006f\u006d\u0065\u0072\u0020N\u0061\u006de\u003a\u0020\u0025\u0073\u000a",_eee .CustomerName );_bcd +=_ef .Sprintf ("\u0054i\u0065\u0072\u003a\u0020\u0025\u0073\n",_eee .Tier );_bcd +=_ef .Sprintf ("\u0043r\u0065a\u0074\u0065\u0064\u0020\u0041\u0074\u003a\u0020\u0025\u0073\u000a",_aeg .UtcTimeFormat (_eee .CreatedAt ));if _eee .ExpiresAt .IsZero (){_bcd +="\u0045x\u0070i\u0072\u0065\u0073\u0020\u0041t\u003a\u0020N\u0065\u0076\u0065\u0072\u000a";}else {_bcd +=_ef .Sprintf ("\u0045x\u0070i\u0072\u0065\u0073\u0020\u0041\u0074\u003a\u0020\u0025\u0073\u000a",_aeg .UtcTimeFormat (_eee .ExpiresAt ));};_bcd +=_ef .Sprintf ("\u0043\u0072\u0065\u0061\u0074\u006f\u0072\u003a\u0020\u0025\u0073\u0020<\u0025\u0073\u003e\u000a",_eee .CreatorName ,_eee .CreatorEmail );return _bcd ;};func _aae (_eff *_eb .Response )([]byte ,error ){var _fgda []byte ;_bccf ,_add :=_bbeb (_eff );if _add !=nil {return _fgda ,_add ;};return _gc .ReadAll (_bccf );};func (_ddd *meteredClient )checkinUsage (_fed meteredUsageCheckinForm )(meteredUsageCheckinResp ,error ){_fed .Package ="\u0075n\u0069\u006f\u0066\u0066\u0069\u0063e";_fed .PackageVersion =_aeg .Version ;var _bdgf meteredUsageCheckinResp ;_gd :=_ddd ._cf +"\u002f\u006d\u0065\u0074er\u0065\u0064\u002f\u0075\u0073\u0061\u0067\u0065\u005f\u0063\u0068\u0065\u0063\u006bi\u006e";_abg ,_eab :=_age .Marshal (_fed );if _eab !=nil {return _bdgf ,_eab ;};_bce ,_eab :=_gdd (_abg );if _eab !=nil {return _bdgf ,_eab ;};_cde ,_eab :=_eb .NewRequest ("\u0050\u004f\u0053\u0054",_gd ,_bce );if _eab !=nil {return _bdgf ,_eab ;};_cde .Header .Add ("\u0043\u006f\u006et\u0065\u006e\u0074\u002d\u0054\u0079\u0070\u0065","\u0061\u0070p\u006c\u0069\u0063a\u0074\u0069\u006f\u006e\u002f\u006a\u0073\u006f\u006e");_cde .Header .Add ("\u0043\u006fn\u0074\u0065\u006et\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067","\u0067\u007a\u0069\u0070");_cde .Header .Add ("\u0041c\u0063e\u0070\u0074\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067","\u0067\u007a\u0069\u0070");_cde .Header .Add ("\u0058-\u0041\u0050\u0049\u002d\u004b\u0045Y",_ddd ._cbd );_adgf ,_eab :=_ddd ._dd .Do (_cde );if _eab !=nil {return _bdgf ,_eab ;};defer _adgf .Body .Close ();if _adgf .StatusCode !=200{return _bdgf ,_ef .Errorf ("\u0066\u0061i\u006c\u0065\u0064\u0020t\u006f\u0020c\u0068\u0065\u0063\u006b\u0069\u006e\u002c\u0020s\u0074\u0061\u0074\u0075\u0073\u0020\u0063\u006f\u0064\u0065\u0020\u0069s\u003a\u0020\u0025\u0064",_adgf .StatusCode );};_eea ,_eab :=_aae (_adgf );if _eab !=nil {return _bdgf ,_eab ;};_eab =_age .Unmarshal (_eea ,&_bdgf );if _eab !=nil {return _bdgf ,_eab ;};return _bdgf ,nil ;};var _cdd stateLoader =defaultStateHolder {};func _fcee (_cgda ,_faf []byte )([]byte ,error ){_dfb ,_acg :=_ab .NewCipher (_cgda );if _acg !=nil {return nil ,_acg ;};_gea :=make ([]byte ,_ab .BlockSize +len (_faf ));_adf :=_gea [:_ab .BlockSize ];if _ ,_gcec :=_af .ReadFull (_ad .Reader ,_adf );_gcec !=nil {return nil ,_gcec ;};_bacf :=_bg .NewCFBEncrypter (_dfb ,_adf );_bacf .XORKeyStream (_gea [_ab .BlockSize :],_faf );_baf :=make ([]byte ,_fd .URLEncoding .EncodedLen (len (_gea )));_fd .URLEncoding .Encode (_baf ,_gea );return _baf ,nil ;};func _agd ()([]string ,[]string ,error ){_abcd ,_aed :=_b .Interfaces ();if _aed !=nil {return nil ,nil ,_aed ;};var _fdd []string ;var _cgb []string ;for _ ,_fbb :=range _abcd {if _fbb .Flags &_b .FlagUp ==0||_ae .Equal (_fbb .HardwareAddr ,nil ){continue ;};_adga ,_egf :=_fbb .Addrs ();if _egf !=nil {return nil ,nil ,_egf ;};_cfc :=0;for _ ,_cbce :=range _adga {var _dfd _b .IP ;switch _fdda :=_cbce .(type ){case *_b .IPNet :_dfd =_fdda .IP ;case *_b .IPAddr :_dfd =_fdda .IP ;};if _dfd .IsLoopback (){continue ;};if _dfd .To4 ()==nil {continue ;};_cgb =append (_cgb ,_dfd .String ());_cfc ++;};_gbg :=_fbb .HardwareAddr .String ();if _gbg !=""&&_cfc > 0{_fdd =append (_fdd ,_gbg );};};return _fdd ,_cgb ,nil ;};type meteredUsageCheckinResp struct{Instance string `json:"inst"`;Next string `json:"next"`;Success bool `json:"success"`;Message string `json:"message"`;RemainingDocs int `json:"rd"`;LimitDocs bool `json:"ld"`;};type LicenseKey struct{LicenseId string `json:"license_id"`;CustomerId string `json:"customer_id"`;CustomerName string `json:"customer_name"`;Tier string `json:"tier"`;CreatedAt _bb .Time `json:"-"`;CreatedAtInt int64 `json:"created_at"`;ExpiresAt _bb .Time `json:"-"`;ExpiresAtInt int64 `json:"expires_at"`;CreatedBy string `json:"created_by"`;CreatorName string `json:"creator_name"`;CreatorEmail string `json:"creator_email"`;UniPDF bool `json:"unipdf"`;UniOffice bool `json:"unioffice"`;UniHTML bool `json:"unihtml"`;Trial bool `json:"trial"`;_bgd bool ;_bcf string ;};func _bbeb (_ddc *_eb .Response )(_af .ReadCloser ,error ){var _gfff error ;var _geb _af .ReadCloser ;switch _bbc .ToLower (_ddc .Header .Get ("\u0043\u006fn\u0074\u0065\u006et\u002d\u0045\u006e\u0063\u006f\u0064\u0069\u006e\u0067")){case "\u0067\u007a\u0069\u0070":_geb ,_gfff =_f .NewReader (_ddc .Body );if _gfff !=nil {return _geb ,_gfff ;};defer _geb .Close ();default:_geb =_ddc .Body ;};return _geb ,nil ;};func init (){_gege ,_fcgd :=_bc .DecodeString (_fgc );if _fcgd !=nil {_fg .Fatalf ("e\u0072\u0072\u006f\u0072 r\u0065a\u0064\u0069\u006e\u0067\u0020k\u0065\u0079\u003a\u0020\u0025\u0073",_fcgd );};_ff ,_fcgd :=_cg .ParsePKIXPublicKey (_gege );if _fcgd !=nil {_fg .Fatalf ("e\u0072\u0072\u006f\u0072 r\u0065a\u0064\u0069\u006e\u0067\u0020k\u0065\u0079\u003a\u0020\u0025\u0073",_fcgd );};_gfa =_ff .(*_fc .PublicKey );};func _cd (_gadb string ,_ecc string ,_ebd string )(string ,error ){_ggd :=_bbc .Index (_ebd ,_gadb );if _ggd ==-1{return "",_ef .Errorf ("\u0068\u0065a\u0064\u0065\u0072 \u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};_efb :=_bbc .Index (_ebd ,_ecc );if _efb ==-1{return "",_ef .Errorf ("\u0066\u006fo\u0074\u0065\u0072 \u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};_adc :=_ggd +len (_gadb )+1;return _ebd [_adc :_efb -1],nil ;};const _cbceg ="\u0055\u004e\u0049OF\u0046\u0049\u0043\u0045\u005f\u0043\u0055\u0053\u0054\u004f\u004d\u0045\u0052\u005f\u004e\u0041\u004d\u0045";func SetLegacyLicenseKey (s string )error {_fba :=_g .MustCompile ("\u005c\u0073");s =_fba .ReplaceAllString (s ,"");var _agef _af .Reader ;_agef =_bbc .NewReader (s );_agef =_fd .NewDecoder (_fd .RawURLEncoding ,_agef );_agef ,_ded :=_f .NewReader (_agef );if _ded !=nil {return _ded ;};_acgc :=_age .NewDecoder (_agef );_ffdd :=&LegacyLicense {};if _ffa :=_acgc .Decode (_ffdd );_ffa !=nil {return _ffa ;};if _fecf :=_ffdd .Verify (_gfa );_fecf !=nil {return _bd .New ("\u006c\u0069\u0063en\u0073\u0065\u0020\u0076\u0061\u006c\u0069\u0064\u0061\u0074\u0069\u006e\u0020\u0065\u0072\u0072\u006f\u0072");};if _ffdd .Expiration .Before (_aeg .ReleasedAt ){return _bd .New ("\u006ci\u0063e\u006e\u0073\u0065\u0020\u0065\u0078\u0070\u0069\u0072\u0065\u0064");};_bad :=_bb .Now ().UTC ();_cac :=LicenseKey {};_cac .CreatedAt =_bad ;_cac .CustomerId ="\u004c\u0065\u0067\u0061\u0063\u0079";_cac .CustomerName =_ffdd .Name ;_cac .Tier =LicenseTierBusiness ;_cac .ExpiresAt =_ffdd .Expiration ;_cac .CreatorName ="\u0055\u006e\u0069\u0044\u006f\u0063\u0020\u0073\u0075p\u0070\u006f\u0072\u0074";_cac .CreatorEmail ="\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0040\u0075\u006e\u0069\u0064o\u0063\u002e\u0069\u006f";_cac .UniOffice =true ;_dce =&_cac ;return nil ;};func (_ggg *LicenseKey )Validate ()error {if _ggg ._bgd {return nil ;};if len (_ggg .LicenseId )< 10{return _ef .Errorf ("i\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020L\u0069\u0063\u0065n\u0073e\u0020\u0049\u0064");};if len (_ggg .CustomerId )< 10{return _ef .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065:\u0020C\u0075\u0073\u0074\u006f\u006d\u0065\u0072 \u0049\u0064");};if len (_ggg .CustomerName )< 1{return _ef .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069c\u0065\u006e\u0073\u0065\u003a\u0020\u0043u\u0073\u0074\u006f\u006d\u0065\u0072\u0020\u004e\u0061\u006d\u0065");};if _bdag .After (_ggg .CreatedAt ){return _ef .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020\u0043\u0072\u0065\u0061\u0074\u0065\u0064 \u0041\u0074\u0020\u0069\u0073 \u0069\u006ev\u0061\u006c\u0069\u0064");};if _ggg .ExpiresAt .IsZero (){_dbe :=_ggg .CreatedAt .AddDate (1,0,0);if _eg .After (_dbe ){_dbe =_eg ;};_ggg .ExpiresAt =_dbe ;};if _ggg .CreatedAt .After (_ggg .ExpiresAt ){return _ef .Errorf ("i\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020\u0043\u0072\u0065\u0061\u0074\u0065\u0064\u0020\u0041\u0074 \u0063a\u006e\u006e\u006f\u0074 \u0062\u0065 \u0047\u0072\u0065\u0061\u0074\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0045\u0078\u0070\u0069\u0072\u0065\u0073\u0020\u0041\u0074");};if _ggg .isExpired (){return _ef .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020l\u0069\u0063\u0065ns\u0065\u003a\u0020\u0054\u0068\u0065 \u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u0068\u0061\u0073\u0020\u0061\u006c\u0072e\u0061\u0064\u0079\u0020\u0065\u0078\u0070\u0069r\u0065\u0064");};if len (_ggg .CreatorName )< 1{return _ef .Errorf ("\u0069\u006ev\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u003a\u0020\u0043\u0072\u0065\u0061\u0074\u006f\u0072\u0020na\u006d\u0065");};if len (_ggg .CreatorEmail )< 1{return _ef .Errorf ("\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069c\u0065\u006e\u0073\u0065\u003a\u0020\u0043r\u0065\u0061\u0074\u006f\u0072\u0020\u0065\u006d\u0061\u0069\u006c");};if _ggg .CreatedAt .After (_ecg ){if !_ggg .UniOffice {return _ef .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006c\u0069\u0063\u0065\u006e\u0073e\u003a\u0020\u0054\u0068\u0069\u0073\u0020\u0055\u006e\u0069\u0044\u006f\u0063\u0020\u006b\u0065\u0079\u0020i\u0073\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0066\u006f\u0072\u0020\u0055\u006e\u0069\u004f\u0066\u0066\u0069\u0063\u0065");};};return nil ;};type reportState struct{Instance string `json:"inst"`;Next string `json:"n"`;Docs int64 `json:"d"`;NumErrors int64 `json:"e"`;LimitDocs bool `json:"ld"`;RemainingDocs int64 `json:"rd"`;LastReported _bb .Time `json:"lr"`;LastWritten _bb .Time `json:"lw"`;Usage map[string ]int `json:"u"`;};func _gff ()*meteredClient {_aa :=meteredClient {_cf :"h\u0074\u0074\u0070\u0073\u003a\u002f/\u0063\u006c\u006f\u0075\u0064\u002e\u0075\u006e\u0069d\u006f\u0063\u002ei\u006f/\u0061\u0070\u0069",_dd :&_eb .Client {Timeout :30*_bb .Second }};if _gee :=_gg .Getenv ("\u0055N\u0049\u0044\u004f\u0043_\u004c\u0049\u0043\u0045\u004eS\u0045_\u0053E\u0052\u0056\u0045\u0052\u005f\u0055\u0052L");_bbc .HasPrefix (_gee ,"\u0068\u0074\u0074\u0070"){_aa ._cf =_gee ;};return &_aa ;};var _cded map[string ]struct{};func _gb (_d string ,_aga []byte )(string ,error ){_bda ,_ :=_fge .Decode ([]byte (_d ));if _bda ==nil {return "",_ef .Errorf ("\u0050\u0072\u0069\u0076\u004b\u0065\u0079\u0020\u0066a\u0069\u006c\u0065\u0064");};_cb ,_ca :=_cg .ParsePKCS1PrivateKey (_bda .Bytes );if _ca !=nil {return "",_ca ;};_gce :=_ec .New ();_gce .Write (_aga );_ga :=_gce .Sum (nil );_fdf ,_ca :=_fc .SignPKCS1v15 (_ad .Reader ,_cb ,_e .SHA512 ,_ga );if _ca !=nil {return "",_ca ;};_be :=_fd .StdEncoding .EncodeToString (_aga );_be +="\u000a\u002b\u000a";_be +=_fd .StdEncoding .EncodeToString (_fdf );return _be ,nil ;};var _debc =&_ag .Mutex {};func _gdd (_gecb []byte )(_af .Reader ,error ){_aacc :=new (_ae .Buffer );_dge :=_f .NewWriter (_aacc );_dge .Write (_gecb );_cdg :=_dge .Close ();if _cdg !=nil {return nil ,_cdg ;};return _aacc ,nil ;};func SetLicenseKey (content string ,customerName string )error {if _abcf {return nil ;};_efdd ,_eccd :=_acf (content );if _eccd !=nil {_ge .Log ("\u004c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u0063\u006fd\u0065\u0020\u0064\u0065\u0063\u006f\u0064e\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076\u000a",_eccd );return _eccd ;};if !_bbc .EqualFold (_efdd .CustomerName ,customerName ){_ge .Log ("\u004ci\u0063e\u006e\u0073\u0065\u0020\u0063\u006f\u0064\u0065\u0020\u0069\u0073s\u0075\u0065\u0020\u002d \u0043\u0075\u0073\u0074\u006fm\u0065\u0072\u0020\u006e\u0061\u006d\u0065\u0020\u006d\u0069\u0073\u006d\u0061\u0074\u0063\u0068\u002c\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0027\u0025\u0073\u0027,\u0020\u0062\u0075\u0074\u0020\u0067\u006f\u0074 \u0027\u0025\u0073\u0027\u000a",customerName ,_efdd .CustomerName );return _ef .Errorf ("\u0063\u0075\u0073\u0074\u006fm\u0065\u0072\u0020\u006e\u0061\u006d\u0065\u0020\u006d\u0069\u0073\u006d\u0061t\u0063\u0068\u002c\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0027\u0025\u0073\u0027\u002c\u0020\u0062\u0075\u0074\u0020\u0067\u006f\u0074\u0020\u0027\u0025\u0073'",customerName ,_efdd .CustomerName );};_eccd =_efdd .Validate ();if _eccd !=nil {_ge .Log ("\u004c\u0069\u0063en\u0073\u0065\u0020\u0063\u006f\u0064\u0065\u0020\u0076a\u006ci\u0064a\u0074i\u006f\u006e\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076\u000a",_eccd );return _eccd ;};_dce =&_efdd ;return nil ;};const (LicenseTierUnlicensed ="\u0075\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064";LicenseTierCommunity ="\u0063o\u006d\u006d\u0075\u006e\u0069\u0074y";LicenseTierIndividual ="\u0069\u006e\u0064\u0069\u0076\u0069\u0064\u0075\u0061\u006c";LicenseTierBusiness ="\u0062\u0075\u0073\u0069\u006e\u0065\u0073\u0073";);func (_ea *LicenseKey )getExpiryDateToCompare ()_bb .Time {if _ea .Trial {return _bb .Now ().UTC ();};return _aeg .ReleasedAt ;};func GenRefId (prefix string )(string ,error ){var _aedc _ae .Buffer ;_aedc .WriteString (prefix );_bfag :=make ([]byte ,8+16);_ggb :=_bb .Now ().UTC ().UnixNano ();_fef .BigEndian .PutUint64 (_bfag ,uint64 (_ggb ));_ ,_aggb :=_ad .Read (_bfag [8:]);if _aggb !=nil {return "",_aggb ;};_aedc .WriteString (_bc .EncodeToString (_bfag ));return _aedc .String (),nil ;};func _fgce (_gaab ,_dda []byte )([]byte ,error ){_fca :=make ([]byte ,_fd .URLEncoding .DecodedLen (len (_dda )));_ggcg ,_bbd :=_fd .URLEncoding .Decode (_fca ,_dda );if _bbd !=nil {return nil ,_bbd ;};_fca =_fca [:_ggcg ];_bacc ,_bbd :=_ab .NewCipher (_gaab );if _bbd !=nil {return nil ,_bbd ;};if len (_fca )< _ab .BlockSize {return nil ,_bd .New ("c\u0069p\u0068\u0065\u0072\u0074\u0065\u0078\u0074\u0020t\u006f\u006f\u0020\u0073ho\u0072\u0074");};_gfe :=_fca [:_ab .BlockSize ];_fca =_fca [_ab .BlockSize :];_abe :=_bg .NewCFBDecrypter (_bacc ,_gfe );_abe .XORKeyStream (_fca ,_fca );return _fca ,nil ;};type MeteredStatus struct{OK bool ;Credits int64 ;Used int64 ;};var _gdg map[string ]int ;func Track (docKey string ,useKey string )error {return _eca (docKey ,useKey ,false )};func (_gcc defaultStateHolder )loadState (_dec string )(reportState ,error ){_fad :=_dag ();if len (_fad )==0{return reportState {},_bd .New ("\u0068\u006fm\u0065\u0020\u0064i\u0072\u0020\u006e\u006f\u0074\u0020\u0073\u0065\u0074");};_accfe :=_agf .Join (_fad ,"\u002eu\u006e\u0069\u0064\u006f\u0063");_aac :=_gg .MkdirAll (_accfe ,0777);if _aac !=nil {return reportState {},_aac ;};if len (_dec )< 20{return reportState {},_bd .New ("i\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006b\u0065\u0079");};_aaf :=[]byte (_dec );_fea :=_ec .Sum512_256 (_aaf [:20]);_bbae :=_bc .EncodeToString (_fea [:]);_ccc :=_agf .Join (_accfe ,_bbae );_dcb ,_aac :=_gc .ReadFile (_ccc );if _aac !=nil {if _gg .IsNotExist (_aac ){return reportState {},nil ;};_ge .Log ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0076\u000a",_aac );return reportState {},_bd .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0061\u0074\u0061");};const _edb ="\u0068\u00619\u004e\u004b\u0038]\u0052\u0062\u004c\u002a\u006d\u0034\u004c\u004b\u0057";_dcb ,_aac =_fgce ([]byte (_edb ),_dcb );if _aac !=nil {return reportState {},_aac ;};var _cbee reportState ;_aac =_age .Unmarshal (_dcb ,&_cbee );if _aac !=nil {_ge .Log ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069d\u0020\u0064\u0061\u0074\u0061\u003a\u0020\u0025\u0076\u000a",_aac );return reportState {},_bd .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0061\u0074\u0061");};return _cbee ,nil ;};type meteredUsageCheckinForm struct{Instance string `json:"inst"`;Next string `json:"next"`;UsageNumber int `json:"usage_number"`;NumFailed int64 `json:"num_failed"`;Hostname string `json:"hostname"`;LocalIP string `json:"local_ip"`;MacAddress string `json:"mac_address"`;Package string `json:"package"`;PackageVersion string `json:"package_version"`;Usage map[string ]int `json:"u"`;};var _abcf =false ;const _eag ="\u000a\u002d\u002d\u002d\u002d\u002d\u0042\u0045\u0047\u0049\u004e \u0050\u0055\u0042\u004c\u0049\u0043\u0020\u004b\u0045Y\u002d\u002d\u002d\u002d\u002d\u000a\u004d\u0049I\u0042\u0049\u006a\u0041NB\u0067\u006b\u0071\u0068\u006b\u0069G\u0039\u0077\u0030\u0042\u0041\u0051\u0045\u0046A\u0041\u004f\u0043\u0041\u0051\u0038\u0041\u004d\u0049\u0049\u0042\u0043\u0067\u004b\u0043\u0041\u0051\u0045A\u006dF\u0055\u0069\u0079\u0064\u0037\u0062\u0035\u0058\u006a\u0070\u006b\u0050\u0035\u0052\u0061\u0070\u0034\u0077\u000a\u0044\u0063\u0031d\u0079\u007a\u0049\u0051\u0034\u004c\u0065\u006b\u0078\u0072\u0076\u0079\u0074\u006e\u0045\u004d\u0070\u004e\u0055\u0062\u006f\u0036i\u0041\u0037\u0034\u0056\u0038\u0072\u0075\u005a\u004f\u0076\u0072\u0053\u0063\u0073\u0066\u0032\u0051\u0065\u004e9\u002f\u0071r\u0055\u0047\u0038\u0071\u0045\u0062\u0055\u0057\u0064\u006f\u0045\u0059\u0071+\u000a\u006f\u0074\u0046\u004e\u0041\u0046N\u0078\u006c\u0047\u0062\u0078\u0062\u0044\u0048\u0063\u0064\u0047\u0056\u0061\u004d\u0030\u004f\u0058\u0064\u0058g\u0044y\u004c5\u0061\u0049\u0045\u0061\u0067\u004c\u0030\u0063\u0035\u0070\u0077\u006a\u0049\u0064\u0050G\u0049\u006e\u0034\u0036\u0066\u0037\u0038\u0065\u004d\u004a\u002b\u004a\u006b\u0064\u0063\u0070\u0044\n\u0044\u004a\u0061\u0071\u0059\u0058d\u0072\u007a5\u004b\u0065\u0073\u0068\u006aS\u0069\u0049\u0061\u0061\u0037\u006d\u0065\u006e\u0042\u0049\u0041\u0058\u0053\u0034\u0055\u0046\u0078N\u0066H\u0068\u004e\u0030\u0048\u0043\u0059\u005a\u0059\u0071\u0051\u0047\u0037\u0062K+\u0073\u0035\u0072R\u0048\u006f\u006e\u0079\u0064\u004eW\u0045\u0047\u000a\u0048\u0038M\u0079\u0076\u00722\u0070\u0079\u0061\u0032K\u0072\u004d\u0075m\u0066\u006d\u0041\u0078\u0055\u0042\u0036\u0066\u0065\u006e\u0043\u002f4\u004f\u0030\u0057\u00728\u0067\u0066\u0050\u004f\u0055\u0038R\u0069\u0074\u006d\u0062\u0044\u0076\u0051\u0050\u0049\u0052\u0058\u004fL\u0034\u0076\u0054B\u0072\u0042\u0064\u0062a\u0041\u000a9\u006e\u0077\u004e\u0050\u002b\u0069\u002f\u002f\u0032\u0030\u004d\u00542\u0062\u0078\u006d\u0065\u0057\u0042\u002b\u0067\u0070\u0063\u0045\u0068G\u0070\u0058\u005a7\u0033\u0033\u0061\u007a\u0051\u0078\u0072\u0043\u0033\u004a\u0034\u0076\u0033C\u005a\u006d\u0045\u004eS\u0074\u0044\u004b\u002f\u004b\u0044\u0053\u0050\u004b\u0055\u0047\u0066\u00756\u000a\u0066\u0077I\u0044\u0041\u0051\u0041\u0042\u000a\u002d\u002d\u002d\u002d\u002dE\u004e\u0044\u0020\u0050\u0055\u0042\u004c\u0049\u0043 \u004b\u0045Y\u002d\u002d\u002d\u002d\u002d\n";type stateLoader interface{loadState (_efd string )(reportState ,error );updateState (_ceg ,_ccg ,_bgc string ,_fa int ,_bbe bool ,_gbf int ,_agg int ,_fgcc _bb .Time ,_cfb map[string ]int )error ;};var _dce =MakeUnlicensedKey ();func (_cgg defaultStateHolder )updateState (_efe ,_caf ,_cae string ,_gec int ,_ddf bool ,_debb int ,_cbb int ,_gaa _bb .Time ,_accf map[string ]int )error {_ddg :=_dag ();if len (_ddg )==0{return _bd .New ("\u0068\u006fm\u0065\u0020\u0064i\u0072\u0020\u006e\u006f\u0074\u0020\u0073\u0065\u0074");};_cbgb :=_agf .Join (_ddg ,"\u002eu\u006e\u0069\u0064\u006f\u0063");_beca :=_gg .MkdirAll (_cbgb ,0777);if _beca !=nil {return _beca ;};if len (_efe )< 20{return _bd .New ("i\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006b\u0065\u0079");};_gbeg :=[]byte (_efe );_bcc :=_ec .Sum512_256 (_gbeg [:20]);_afc :=_bc .EncodeToString (_bcc [:]);_gca :=_agf .Join (_cbgb ,_afc );var _gffd reportState ;_gffd .Docs =int64 (_gec );_gffd .NumErrors =int64 (_cbb );_gffd .LimitDocs =_ddf ;_gffd .RemainingDocs =int64 (_debb );_gffd .LastWritten =_bb .Now ().UTC ();_gffd .LastReported =_gaa ;_gffd .Instance =_caf ;_gffd .Next =_cae ;_gffd .Usage =_accf ;_ebg ,_beca :=_age .Marshal (_gffd );if _beca !=nil {return _beca ;};const _gcaa ="\u0068\u00619\u004e\u004b\u0038]\u0052\u0062\u004c\u002a\u006d\u0034\u004c\u004b\u0057";_ebg ,_beca =_fcee ([]byte (_gcaa ),_ebg );if _beca !=nil {return _beca ;};_beca =_gc .WriteFile (_gca ,_ebg ,0600);if _beca !=nil {return _beca ;};return nil ;};var _ecg =_bb .Date (2019,6,6,0,0,0,0,_bb .UTC );func (_adca *LicenseKey )IsLicensed ()bool {if _adca ==nil {return false ;};return _adca .Tier !=LicenseTierUnlicensed ||_adca ._bgd ;};func MakeUnlicensedKey ()*LicenseKey {_cbg :=LicenseKey {};_cbg .CustomerName ="\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064";_cbg .Tier =LicenseTierUnlicensed ;_cbg .CreatedAt =_bb .Now ().UTC ();_cbg .CreatedAtInt =_cbg .CreatedAt .Unix ();return &_cbg ;};const (_bba ="\u002d\u002d\u002d--\u0042\u0045\u0047\u0049\u004e\u0020\u0055\u004e\u0049D\u004fC\u0020L\u0049C\u0045\u004e\u0053\u0045\u0020\u004b\u0045\u0059\u002d\u002d\u002d\u002d\u002d";_ba ="\u002d\u002d\u002d\u002d\u002d\u0045\u004e\u0044\u0020\u0055\u004e\u0049\u0044\u004f\u0043 \u004cI\u0043\u0045\u004e\u0053\u0045\u0020\u004b\u0045\u0059\u002d\u002d\u002d\u002d\u002d";);func (_ce *LicenseKey )isExpired ()bool {return _ce .getExpiryDateToCompare ().After (_ce .ExpiresAt )};func GetLicenseKey ()*LicenseKey {if _dce ==nil {return nil ;};_fada :=*_dce ;return &_fada ;};type meteredStatusResp struct{Valid bool `json:"valid"`;OrgCredits int64 `json:"org_credits"`;OrgUsed int64 `json:"org_used"`;OrgRemaining int64 `json:"org_remaining"`;};func _dag ()string {_bfe :=_gg .Getenv ("\u0048\u004f\u004d\u0045");if len (_bfe )==0{_bfe ,_ =_gg .UserHomeDir ();};return _bfe ;};func init (){_dbf :=_gg .Getenv (_egfg );_ffd :=_gg .Getenv (_cbceg );if len (_dbf )==0||len (_ffd )==0{return ;};_def ,_fcb :=_gc .ReadFile (_dbf );if _fcb !=nil {_ge .Log ("\u0055\u006ea\u0062\u006c\u0065\u0020t\u006f\u0020r\u0065\u0061\u0064\u0020\u006c\u0069\u0063\u0065n\u0073\u0065\u0020\u0063\u006f\u0064\u0065\u0020\u0066\u0069\u006c\u0065:\u0020\u0025\u0076\u000a",_fcb );return ;};_fcb =SetLicenseKey (string (_def ),_ffd );if _fcb !=nil {_ge .Log ("\u0055\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u006c\u006f\u0061\u0064\u0020l\u0069c\u0065\u006e\u0073\u0065\u0020\u0063\u006f\u0064\u0065\u003a\u0020\u0025\u0076\u000a",_fcb );return ;};};func _eca (_efbb string ,_cfg string ,_bac bool )error {if _dce ==nil {return _bd .New ("\u006e\u006f\u0020\u006c\u0069\u0063\u0065\u006e\u0073e\u0020\u006b\u0065\u0079");};if !_dce ._bgd ||len (_dce ._bcf )==0{return nil ;};if len (_efbb )==0&&!_bac {return _bd .New ("\u0064\u006f\u0063\u004b\u0065\u0079\u0020\u006e\u006ft\u0020\u0073\u0065\u0074");};_debc .Lock ();defer _debc .Unlock ();if _cded ==nil {_cded =map[string ]struct{}{};};if _gdg ==nil {_gdg =map[string ]int {};};_bdb :=0;if !_bac {_ ,_adbb :=_cded [_efbb ];if !_adbb {_cded [_efbb ]=struct{}{};_bdb ++;};if _bdb ==0{return nil ;};_gdg [_cfg ]++;};_fag :=_bb .Now ();_gfg ,_gaf :=_cdd .loadState (_dce ._bcf );if _gaf !=nil {_ge .Log ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0076\u000a",_gaf );return _gaf ;};if _gfg .Usage ==nil {_gfg .Usage =map[string ]int {};};for _gegc ,_gcg :=range _gdg {_gfg .Usage [_gegc ]+=_gcg ;};_gdg =nil ;const _cdc =24*_bb .Hour ;const _dgf =3*24*_bb .Hour ;if len (_gfg .Instance )==0||_fag .Sub (_gfg .LastReported )> _cdc ||(_gfg .LimitDocs &&_gfg .RemainingDocs <=_gfg .Docs +int64 (_bdb ))||_bac {_adbc ,_aaa :=_gg .Hostname ();if _aaa !=nil {return _aaa ;};_efdf :=_gfg .Docs ;_cdaa ,_dgfa ,_aaa :=_agd ();if _aaa !=nil {return _aaa ;};_fe .Strings (_dgfa );_fe .Strings (_cdaa );_eaa ,_aaa :=_dca ();if _aaa !=nil {return _aaa ;};_aea :=false ;for _ ,_cfa :=range _dgfa {if _cfa ==_eaa .String (){_aea =true ;};};if !_aea {_dgfa =append (_dgfa ,_eaa .String ());};_bdbc :=_gff ();_bdbc ._cbd =_dce ._bcf ;_efdf +=int64 (_bdb );_dcbe :=meteredUsageCheckinForm {Instance :_gfg .Instance ,Next :_gfg .Next ,UsageNumber :int (_efdf ),NumFailed :_gfg .NumErrors ,Hostname :_adbc ,LocalIP :_bbc .Join (_dgfa ,"\u002c\u0020"),MacAddress :_bbc .Join (_cdaa ,"\u002c\u0020"),Package :"\u0075n\u0069\u006f\u0066\u0066\u0069\u0063e",PackageVersion :_aeg .Version ,Usage :_gfg .Usage };if len (_cdaa )==0{_dcbe .MacAddress ="\u006e\u006f\u006e\u0065";};_fbe :=int64 (0);_edd :=_gfg .NumErrors ;_aag :=_fag ;_gcb :=0;_fgd :=_gfg .LimitDocs ;_cce ,_aaa :=_bdbc .checkinUsage (_dcbe );if _aaa !=nil {if _fag .Sub (_gfg .LastReported )> _dgf {return _bd .New ("\u0074\u006f\u006f\u0020\u006c\u006f\u006e\u0067\u0020\u0073\u0069\u006e\u0063\u0065\u0020\u006c\u0061\u0073\u0074\u0020\u0073\u0075\u0063\u0063e\u0073\u0073\u0066\u0075\u006c \u0063\u0068e\u0063\u006b\u0069\u006e");};_fbe =_efdf ;_edd ++;_aag =_gfg .LastReported ;}else {_fgd =_cce .LimitDocs ;_gcb =_cce .RemainingDocs ;_edd =0;};if len (_cce .Instance )==0{_cce .Instance =_dcbe .Instance ;};if len (_cce .Next )==0{_cce .Next =_dcbe .Next ;};_aaa =_cdd .updateState (_bdbc ._cbd ,_cce .Instance ,_cce .Next ,int (_fbe ),_fgd ,_gcb ,int (_edd ),_aag ,nil );if _aaa !=nil {return _aaa ;};if !_cce .Success {return _ef .Errorf ("\u0065r\u0072\u006f\u0072\u003a\u0020\u0025s",_cce .Message );};}else {_gaf =_cdd .updateState (_dce ._bcf ,_gfg .Instance ,_gfg .Next ,int (_gfg .Docs )+_bdb ,_gfg .LimitDocs ,int (_gfg .RemainingDocs ),int (_gfg .NumErrors ),_gfg .LastReported ,_gfg .Usage );if _gaf !=nil {return _gaf ;};};return nil ;};type LegacyLicense struct{Name string ;Signature string `json:",omitempty"`;Expiration _bb .Time ;LicenseType LegacyLicenseType ;};func (_da *LicenseKey )TypeToString ()string {if _da ._bgd {return "M\u0065t\u0065\u0072\u0065\u0064\u0020\u0073\u0075\u0062s\u0063\u0072\u0069\u0070ti\u006f\u006e";};if _da .Tier ==LicenseTierUnlicensed {return "\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064";};if _da .Tier ==LicenseTierCommunity {return "\u0041\u0047PL\u0076\u0033\u0020O\u0070\u0065\u006e\u0020Sou\u0072ce\u0020\u0043\u006f\u006d\u006d\u0075\u006eit\u0079\u0020\u004c\u0069\u0063\u0065\u006es\u0065";};if _da .Tier ==LicenseTierIndividual ||_da .Tier =="\u0069\u006e\u0064i\u0065"{return "\u0043\u006f\u006dm\u0065\u0072\u0063\u0069a\u006c\u0020\u004c\u0069\u0063\u0065\u006es\u0065\u0020\u002d\u0020\u0049\u006e\u0064\u0069\u0076\u0069\u0064\u0075\u0061\u006c";};return "\u0043\u006fm\u006d\u0065\u0072\u0063\u0069\u0061\u006c\u0020\u004c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u002d\u0020\u0042\u0075\u0073\u0069ne\u0073\u0073";};func _abc (_db string ,_gad string )([]byte ,error ){var (_ac int ;_bec string ;);for _ ,_bec =range []string {"\u000a\u002b\u000a","\u000d\u000a\u002b\r\u000a","\u0020\u002b\u0020"}{if _ac =_bbc .Index (_gad ,_bec );_ac !=-1{break ;};};if _ac ==-1{return nil ,_ef .Errorf ("\u0069\u006e\u0076al\u0069\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u002c \u0073i\u0067n\u0061t\u0075\u0072\u0065\u0020\u0073\u0065\u0070\u0061\u0072\u0061\u0074\u006f\u0072");};_gbd :=_gad [:_ac ];_afd :=_ac +len (_bec );_de :=_gad [_afd :];if _gbd ==""||_de ==""{return nil ,_ef .Errorf ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0069n\u0070\u0075\u0074,\u0020\u006d\u0069\u0073\u0073\u0069\u006e\u0067\u0020or\u0069\u0067\u0069n\u0061\u006c \u006f\u0072\u0020\u0073\u0069\u0067n\u0061\u0074u\u0072\u0065");};_bea ,_fga :=_fd .StdEncoding .DecodeString (_gbd );if _fga !=nil {return nil ,_ef .Errorf ("\u0069\u006e\u0076\u0061li\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0072\u0069\u0067\u0069\u006ea\u006c");};_acc ,_fga :=_fd .StdEncoding .DecodeString (_de );if _fga !=nil {return nil ,_ef .Errorf ("\u0069\u006e\u0076al\u0069\u0064\u0020\u0069\u006e\u0070\u0075\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_deb ,_ :=_fge .Decode ([]byte (_db ));if _deb ==nil {return nil ,_ef .Errorf ("\u0050\u0075\u0062\u004b\u0065\u0079\u0020\u0066\u0061\u0069\u006c\u0065\u0064");};_cbf ,_fga :=_cg .ParsePKIXPublicKey (_deb .Bytes );if _fga !=nil {return nil ,_fga ;};_bbf :=_cbf .(*_fc .PublicKey );if _bbf ==nil {return nil ,_ef .Errorf ("\u0050u\u0062\u004b\u0065\u0079\u0020\u0063\u006f\u006e\u0076\u0065\u0072s\u0069\u006f\u006e\u0020\u0066\u0061\u0069\u006c\u0065\u0064");};_bgb :=_ec .New ();_bgb .Write (_bea );_adb :=_bgb .Sum (nil );_fga =_fc .VerifyPKCS1v15 (_bbf ,_e .SHA512 ,_adb ,_acc );if _fga !=nil {return nil ,_fga ;};return _bea ,nil ;};func SetMeteredKey (apiKey string )error {if len (apiKey )==0{_ge .Log ("\u004d\u0065\u0074e\u0072\u0065\u0064\u0020\u004c\u0069\u0063\u0065\u006e\u0073\u0065\u0020\u0041\u0050\u0049\u0020\u004b\u0065\u0079\u0020\u006d\u0075\u0073\u0074\u0020\u006e\u006f\u0074\u0020b\u0065\u0020\u0065\u006d\u0070\u0074\u0079\u000a");_ge .Log ("\u002d\u0020\u0047\u0072\u0061\u0062\u0020o\u006e\u0065\u0020i\u006e\u0020\u0074h\u0065\u0020F\u0072\u0065\u0065\u0020\u0054\u0069e\u0072 a\u0074\u0020\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0063\u006c\u006f\u0075\u0064\u002e\u0075\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f\u000a");return _ef .Errorf ("\u006de\u0074\u0065\u0072e\u0064\u0020\u006ci\u0063en\u0073\u0065\u0020\u0061\u0070\u0069\u0020k\u0065\u0079\u0020\u006d\u0075\u0073\u0074\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006d\u0070\u0074\u0079\u003a\u0020\u0063\u0072\u0065\u0061\u0074\u0065 o\u006ee\u0020\u0061\u0074\u0020\u0068\u0074t\u0070\u0073\u003a\u002f\u002fc\u006c\u006f\u0075\u0064\u002e\u0075\u006e\u0069\u0064\u006f\u0063.\u0069\u006f");};if _dce !=nil &&(_dce ._bgd ||_dce .Tier !=LicenseTierUnlicensed ){_ge .Log ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u006e\u006f\u0074\u0020\u0073\u0065\u0074\u0020\u006c\u0069\u0063\u0065n\u0073\u0065\u0020\u006b\u0065\u0079 \u0074\u0077\u0069\u0063\u0065\u0020\u002d\u0020\u0053\u0068\u006f\u0075\u006c\u0064 \u006a\u0075s\u0074\u0020\u0069\u006ei\u0074\u0069\u0061\u006c\u0069z\u0065\u0020\u006f\u006e\u0063\u0065\u000a");return _bd .New ("\u006c\u0069\u0063en\u0073\u0065\u0020\u006b\u0065\u0079\u0020\u0061\u006c\u0072\u0065\u0061\u0064\u0079\u0020\u0073\u0065\u0074");};_ace :=_gff ();_ace ._cbd =apiKey ;_cdb ,_bfa :=_ace .getStatus ();if _bfa !=nil {return _bfa ;};if !_cdb .Valid {return _bd .New ("\u006b\u0065\u0079\u0020\u006e\u006f\u0074\u0020\u0076\u0061\u006c\u0069\u0064");};_ccd :=&LicenseKey {_bgd :true ,_bcf :apiKey };_dce =_ccd ;return nil ;};var _eg =_bb .Date (2020,1,1,0,0,0,0,_bb .UTC );var _gfa *_fc .PublicKey ;func _acf (_adg string )(LicenseKey ,error ){var _gf LicenseKey ;_geg ,_eed :=_cd (_bba ,_ba ,_adg );if _eed !=nil {return _gf ,_eed ;};_fcg ,_eed :=_abc (_eag ,_geg );if _eed !=nil {return _gf ,_eed ;};_eed =_age .Unmarshal (_fcg ,&_gf );if _eed !=nil {return _gf ,_eed ;};_gf .CreatedAt =_bb .Unix (_gf .CreatedAtInt ,0);if _gf .ExpiresAtInt > 0{_bf :=_bb .Unix (_gf .ExpiresAtInt ,0);_gf .ExpiresAt =_bf ;};return _gf ,nil ;};type defaultStateHolder struct{};